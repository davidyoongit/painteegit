<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <title>Paintee</title>
    <!-- CSS  -->
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,700' rel='stylesheet' type='text/css'>
    <link href="css/swiper.css" type="text/css" rel="stylesheet"/>
    <link href="css/style.css" type="text/css" rel="stylesheet"/>
    <style>
        *{
            margin: 0px;
            padding: 0px;
        }
        html, body {
            position: relative;
            height: 100%;
            color: #fff;
            font-family: "Roboto", sans-serif;
            font-weight: 300;
        }
        .main_container{
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .mode_container{
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .parallax-bg {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 150%;
            -webkit-background-size: cover;
            background-size: cover;
            background-position: center;
        }
        #follow{
            background-color: hsla(190,60%,50%,1);
        }
        #popular{
            background-color: hsla(330,60%,50%,1);
        }
        #new{
            background-color: hsla(80,60%,45%,1);
        }
        #my{
            background-color: hsla(250,60%,50%,1);
        }
        .home_container{
            width: 80%;
            height: 100%;
            text-align: center;
            float: left;
            font-size: 14px;
        }
        .home_title_margin{
            width: 100%;
            height: 25%;
        }
        .home_title{
            position: relative;
            width: 100%;
            font-family: 'Pacifico', cursive;
            font-size: 80px;
        }
        .home_contents{
            position: relative;
            width: 100%;
            font-family: "Roboto", sans-serif;
            font-weight: 300;
        }
        .home_contents_margin{
            width: 100%;
            height: 5%;
        }
        .home_box_follow{
            width: 100px;
            margin: auto;
            margin-top: 20px;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.9);
            text-align: center;
            color: #418c96;
            font-weight: 400;
            cursor: pointer;
        }
        .home_box_my{
            width: 100px;
            margin: auto;
            margin-top: 20px;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.9);
            text-align: center;
            color: #50419b;
            font-weight: 400;
            cursor: pointer;
        }
        .home_box_num{
            font-weight: 900;
        }
        .home_next{
            position: absolute;
            bottom: 0%;
            width: 100%;
            text-align: center;
        }
        .home_prev{
            position: relative;
            top: 0;
            width: 100%;
            text-align: center;
        }
        .list_container{
            width: 100%;
            height: 100%;
        }
        .list_contents{
            width: 80%;
            height: 100%;
            text-align: center;
            vertical-align: middle;
        }
        .list_info{
            width: 100%;
            height: 30%;
            min-height: 150px;
            display: table;
            font-size: 12px;
        }
        .list_info_row{
            display: table-row;
        }
        .list_info_sentence{
            display: table-cell;
            text-align: center;
            vertical-align: middle;
            height: 90%;
            min-height: 140px;
            font-size: 1em;
        }
        .list_info_sentence_wrighter{
            font-family: 'Merriweather', serif;
            font-style: italic;
            font-size: 1.2em;
        }
        .list_info_posted{
            float: left;
            width: 60%;
            text-align: left;
            margin-left: 5%;
            font-size: 1em;
            font-weight: 200;
        }
        .list_info_posted_num{
            font-weight: 600;
        }
        .list_info_date{
            float: left;
            width: 30%;
            text-align: right;
            margin-right: 5%;
            font-size: 1em;
            font-weight: 200;
        }
        .list_painting{
            background-color: rgba(255,255,255,0.9);
            box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.2);
            background-size: cover;
        }
        .list_artist_btn{
            position: absolute;
            bottom: 5px;
            left: 2%;
            height: 40px;
            line-height: 40px;
            font-size: 1.5em;
            font-family: 'Merriweather', serif;
            text-align: left;
            text-shadow: 0px 0px 5px rgba(0,0,0,0.1);
        }
        .list_post_btn{
            position: absolute;
            bottom: 5px;
            right: 2%;
            width: 120px;
            height: 40px;
            line-height: 40px;
            font-family: 'Merriweather', serif;
            font-size: 1.2em;
            font-weight: 700;
            text-align: center;
            box-shadow: 0px 0px 5px 2px rgba(0,0,0,0.1);
            border-radius: 5px;
            background-color: white;
            color: rgb(80,80,80);
        }
        .bottom_bar{
            position: absolute;
            bottom: 0%;
            width: 106.25%;
            left: -3.125%;
            height: 50px;
            transition: opacity 300ms;
            opacity: 0;
        }
        .login_btn{
            width: 100px;
            margin: auto;
            padding: 10px;
            text-align: center;
            border-style: solid;
            border-width: 1px;
            border-radius: 5px;
            border-color: rgba(255,255,255,0.5);
        }
        .login_btn:hover{
            cursor: pointer;
        }
        #side_menu{
            position: absolute;
            top: 0px;
            right: 100%;
            color: rgb(100,100,100);
            background-color: white;
            max-width: 500px;
            width: 80%;
            height: 100%;
            box-shadow: 0px 0px 10px 10px rgba(0,0,0,0.1);
            transition: right 200ms;
            z-index: 10;
        }
        .side_menu_login{
            height: 15%;
            max-height: 100px;
            text-align: center;
            margin-top: 50px;
        }
        .side_menu_login_id{
            font-family: 'Merriweather', serif;
            font-size: 1.5em;
            font-weight: 700;
        }
        .side_menu_major{
            padding: 2%;
            padding-left: 5%;
            font-size: 2em;
        }
        .side_menu_major:hover{
            cursor: pointer;
        }
        .side_menu_minor{
            padding: 2%;
            padding-left: 5%;
            font-size: 1.5em;
        }
        .side_menu_minor:hover{
            cursor: pointer;
        }
        .side_menu_margin{
            height: 5%;
        }
        .side_menu_bottom{
            position: absolute;
            bottom: 0%;
            width: 100%;
        }
        .side_menu_lang{
            width: 100%;
        	color: rgba(100,100,100,0.9);
            text-align: center;
        }
        .side_menu_copyright{
            padding: 2%;
            padding-left: 5%;
        	color: rgba(100,100,100,0.5);
        	font-size: 0.8em;
            text-align: center;
        }
        .side_menu_btn{
            position: absolute;
            left: 100%;
            top: 0%;
            padding: 5px;
            color: white;
        }
        .side_menu_close{
            position: absolute;
            left: 100%;
            top: 0%;
            padding: 5px;
            color: white;
            display: none;
        }
        .modal{
            position: absolute;
            display: none;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.2);
            z-index: 5;
        }
        #fullscreen_btn{
            position: absolute;
            right: 0%;
            top: 0%;
            padding: 5px;
            color: white;
            z-index: 10;
        }
        .swiper-pagination {
            top: 10px;
            left: 0;
            width: 100%;
        }
        .swiper-pagination-bullet:first-child {
            width: 20px;
            border-radius: 20%;
        }
        .swiper-pagination-bullet-active {
          opacity: 1;
          background: #fff;
        }
        /*   고해상도 디스플레이   */
        @media  screen and (min-device-pixel-ratio: 1.5),
        screen and (-webkit-min-device-pixel-ratio: 1.5),
        screen and (min-moz-device-pixel-ratio: 1.5),
        screen and (-o-min-device-pixel-ratio: 1.5) {
                .home_title{
                    font-size: 60px;
                }
                .home_title_margin{
                    height: 20%
                }
                .home_container{
                 font-size: 10px;
                }
                .list_info{
                    font-size: 12px;
                }
                #side_menu{
                    font-size: 12px;
                }
                .list_artist_btn{
                    bottom: 7.5px;
                    left: 2%;
                    height: 35px;
                    line-height: 35px;
                    font-size: 1.2em;
                }
                .list_post_btn{
                    bottom: 7.5px;
                    right: 2%;
                    width: 100px;
                    height: 35px;
                    line-height: 35px;
                    font-size: 1em;
                }
        }
        @media  screen and (min-devicepixel-ratio: 2.5),
        screen and (-webkit-min-device-pixel-ratio: 2.5),
        screen and (min-moz-device-pixel-ratio: 2.5),
        screen and (-o-min-device-pixel-ratio: 2.5) {
                .home_title{
                    font-size: 50px;
                }
                .home_title_margin{
                    height: 15%
                }
                .home_container{
                 font-size: 9px;
                }
                .list_info{
                    font-size: 10px;
                }
                #side_menu{
                    font-size: 10px;
                }
                .list_artist_btn{
                    bottom: 10px;
                    left: 2%;
                    height: 30px;
                    line-height: 30px;
                    font-size: 1em;
                }
                .list_post_btn{
                    bottom: 10px;
                    right: 2%;
                    width: 90px;
                    height: 30px;
                    line-height: 30px;
                    font-size: 0.9em;
                }
        }

        /*   PC화면   */
        @media screen and (min-width: 729px){
            .home_container{
                width: 648px;
            }
            .list_contents{
                width: 648px;
            }
        }

    </style>
</head>
<body>

    <!--  화면이 스크롤되지 않도록 고정, 나중에 반응형으로 고정  -->
    <div class="main_container swiper_container">
        <div class="swiper-wrapper">

        <!--  상하 스크롤 또는 메뉴선택으로 변경되는 블록 [follow]  -->
        <div class="mode_container swiper-slide" id="follow">
            <div class="list_container swiper_container_follow">
                <div class="bottom_bar" style="background-color: hsl(200,60%,20%)"></div>
                <div class="swiper-wrapper"></div>
                <div class="swiper-scrollbar swiper-scrollbar-follow"></div>

            </div>
        </div>
        <!--  상하 스크롤 또는 메뉴선택으로 변경되는 블록 [popular]  -->
        <div class="mode_container swiper-slide" id="popular">
            <div class="list_container swiper_container_popular">
                <div class="bottom_bar" style="background-color: hsl(330,60%,20%)"></div>
                <div class="swiper-wrapper"></div>
                <div class="swiper-scrollbar swiper-scrollbar-popular"></div>

            </div>
        </div>
        <!--  상하 스크롤 또는 메뉴선택으로 변경되는 블록 [new]  -->
        <div class="mode_container swiper-slide" id="new">
            <div class="list_container swiper_container_new">
                <div class="bottom_bar" style="background-color: hsl(90,60%,20%)"></div>
                <div class="swiper-wrapper"></div>
                <div class="swiper-scrollbar swiper-scrollbar-new"></div>

            </div>
        </div>
        <!--  상하 스크롤 또는 메뉴선택으로 변경되는 블록 [my]  -->
        <div class="mode_container swiper-slide" id="my">
            <div class="list_container swiper_container_my">
                <div class="bottom_bar" style="background-color: hsl(250,60%,20%)"></div>
                <div class="swiper-wrapper"></div>
                <div class="swiper-scrollbar swiper-scrollbar-my"></div>
            </div>
        </div>
        </div>
        <div id="side_menu">
            <div class="side_menu_login"></div>
            <div class="side_menu_major" id="menu_follow">Follow </div>
            <div class="side_menu_major" id="menu_popular">Popular</div>
            <div class="side_menu_major" id="menu_new">New</div>
            <div class="side_menu_major" id="menu_my">My</div>
            <div class="side_menu_margin"></div>
            <div class="side_menu_minor">upload</div>
            <div class="side_menu_minor">reward</div>
            <div class="side_menu_minor">about</div>
            <div class="side_menu_minor">search</div>
            <div class="side_menu_btn"><i class="material-icons" style="font-size:24px">menu</i></div>
            <div class="side_menu_close"><i class="material-icons" style="font-size:24px">close</i></div>
            <div class="side_menu_bottom">
                <div class="side_menu_lang">En | Ko</div> <h1>Count:<%= count %></h1>
                <div class="side_menu_copyright">Copyright ⓒ paintee. Inc.,</div>
            </div>
        </div>
        <div class="modal"></div>
        <div id="fullscreen_btn"><i class="material-icons" style="font-size:24px">fullscreen</i></div>
    </div>

    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/swiper.jquery.min.js"></script>
    <script type="text/javascript">

        //david 1218
        var count = <%- JSON.stringify(count) %>;
        var welcomeText = <%- JSON.stringify(welcome.welcomeText) %>;
        var welcomeTextMain = <%- JSON.stringify(welcome.welcomeTextMain) %>;
        var popularImages = <%- JSON.stringify(popularImages) %>;
        var newImages = <%- JSON.stringify(newImages) %>;

        // 모바일 웹브라우져를 전체화면으로 표시
        window.scrollTo(0,1);
        $("#fullscreen_btn").click(function(){toggleFullScreen()});


        // 전역변수 설정
        var mainWidth = $(window).width();
        var mainHeight = $(window).height();
        var userID = "";
        var currentSwiper="";

        // main container 시작
        var mainSwiper = new Swiper('.swiper_container', {
            direction: 'vertical',
            mousewheelControl : true
        });

        // list container 시작
        var followSwiper = new Swiper('.swiper_container_follow', {
            slidesPerView: 'auto',
            centeredSlides: true,
            spaceBetween: mainWidth*0.05,
            mousewheelControl : true,
            scrollbar: '.swiper-scrollbar-follow',
            scrollbarHide: true
        })
        var popularSwiper = new Swiper('.swiper_container_popular', {
            slidesPerView: 'auto',
            centeredSlides: true,
            spaceBetween: mainWidth*0.05,
            mousewheelControl : true,
            scrollbar: '.swiper-scrollbar-popular',
            scrollbarHide: true
        })
        var newSwiper = new Swiper('.swiper_container_new', {
            slidesPerView: 'auto',
            centeredSlides: true,
            spaceBetween: mainWidth*0.05,
            mousewheelControl : true,
            scrollbar: '.swiper-scrollbar-new',
            scrollbarHide: true
        })
        var mySwiper = new Swiper('.swiper_container_my', {
            slidesPerView: 'auto',
            centeredSlides: true,
            spaceBetween: mainWidth*0.05,
            mousewheelControl : true,
            scrollbar: '.swiper-scrollbar-my',
            scrollbarHide: true
        })


        // mainSwiper의 첫항목과 마지막항목에서 스와이프 방지
        function mainLock(mainSwiper){
            if(mainSwiper.isBeginning){
                mainSwiper.lockSwipeToPrev();
            }else if(mainSwiper.isEnd){
                mainSwiper.lockSwipeToNext();
            }else{
                mainSwiper.unlockSwipes();
            }
            currentSwiper="";
        };


        // list 상태에서 mode container 스와이프 방지 && 마우스휠 해제/설정 && 페이지네이션 show/hide
        function listLock(swiper){
            if(swiper.isBeginning){
                if(mainSwiper.isBeginning){
                    mainSwiper.unlockSwipeToNext();
                }else if(mainSwiper.isEnd){
                    mainSwiper.unlockSwipeToPrev();
                }else{
                    mainSwiper.unlockSwipes();
                }
                swiper.disableMousewheelControl();
                $(".swiper-scrollbar").hide();
                $(".bottom_bar").css("opacity", 0);
            }else{
                mainSwiper.lockSwipes();
                swiper.enableMousewheelControl();
                $(".swiper-scrollbar").show();
                $(".bottom_bar").css("opacity", 1);
                currentSwiper=swiper;
            }
        }
        mainSwiper.on("onTransitionEnd", function(mainSwiper){mainLock(mainSwiper)});
        followSwiper.on("onTransitionEnd", function(swiper){listLock(swiper)});
        popularSwiper.on("onTransitionEnd", function(swiper){listLock(swiper)});
        newSwiper.on("onTransitionEnd", function(swiper){listLock(swiper)});
        mySwiper.on("onTransitionEnd", function(swiper){listLock(swiper)});


        // 그림 목록 화면을 하나를 구성하는 생성자
        function Structure(index){

                this.index              =index;
                this.container          =$("<div>").addClass("list_contents swiper-slide");

                this.listInfo           =$("<div>").addClass("list_info");
                this.listInfoRow_1      =$("<div>").addClass("list_info_row");
                this.listInfoRow_2      =$("<div>").addClass("list_info_row");
                this.listInfoSentence   =$("<div>").addClass("list_info_sentence");
                this.listInfoPosted     =$("<div>").addClass("list_info_posted");
                this.listInfoDate       =$("<div>").addClass("list_info_date");

                this.listPainting       =$("<div>").addClass("list_painting");

                this.bottom             =$("<div>").addClass("bottom_bar");
                this.listArtist         =$("<div>").addClass("list_artist_btn");
                this.listPostBtn        =$("<div>").addClass("list_post_btn").html("post it");

        }
        Structure.prototype = {
                setSentence:        function(sentence, wrighter){
                                        this.listInfoSentence.html(sentence+"<br> <span class='list_info_sentence_wrighter'> by <b>"+wrighter+"</b></span>");
                                    },
                setPostedNumber:    function(postedByPeople){
                                        this.listInfoPosted.html("<span class='list_info_posted_num'>"+postedByPeople+"</span> people already posted it")
                                    },
                setDate:            function(date){
                                        this.listInfoDate.html(date)
                                    },
                setPainting:        function(){
                                            if(mainWidth<729){
                                                this.listPainting.css({"width": mainWidth*0.8, "height": mainWidth*10/9});
                                            }else{
                                                this.listPainting.css({"width": "648px", "height": "900px"});
                                            }
                                        this.listPainting.css("background-image", "url(p"+(this.index%5)+".png");
                                    },
                setColor:           function(color){
                                        this.bottom.css("background-color", color);
                                        this.listPostBtn.css("color", color);
                                    },
                                    //david 1218
                setArtist:          function(author){
                                        this.listArtist.html(author+this.index);
                                    },
                buildStructure:     function(){
                                        this.setPainting();
                                        this.listInfoRow_1.append(this.listInfoSentence);
                                        this.listInfo.append(this.listInfoRow_1);
                                        this.listInfoRow_2.append(this.listInfoPosted);
                                        this.listInfoRow_2.append(this.listInfoDate);
                                        this.listInfo.append(this.listInfoRow_2);
                                        this.container.append(this.listInfo);
                                        this.container.append(this.listPainting);
                                        this.container.append(this.bottom);
                                        this.container.append(this.listArtist);
                                        this.container.append(this.listPostBtn);

                                        return this.container;
                                    }
     }

        // 현재 슬라이드 위치에서 앞으로 5개의 슬라이드가 없으면 새로 생성 (무한스크롤)
        function addPainting(swiper, currentIndex, type){
            if(swiper.slides.length<currentIndex+5 && swiper.slides.length<=3){
                for(swiper.slides.length ; swiper.slides.length < currentIndex+5 ;){
                    if(swiper.slides.length > 3){
                        break;
                    }
                    var newSlide = new Structure(swiper.slides.length);
                    //david 1218
                    //newSlide.setSentence(newSlide.index+"번째 그림에 대한 설명입니다. <br> 200자 까지 적을 수 있습니다.", "wrighter");
                    newSlide.setPostedNumber(newSlide.index);
                    newSlide.setDate("11. Nov");
                    
                    newSlide.setArtist();
                    //david 1218
                    if(type=="follow"){
                        newSlide.setColor("hsl(200,60%,20%)");
                    }else if(type=="popular"){
                        newSlide.setSentence(newSlide.index+ popularImages[newSlide.index-1].desc, popularImages[newSlide.index-1].author);
                        newSlide.setArtist(popularImages[newSlide.index-1].author);
                        newSlide.setColor("hsl(330,60%,20%)");
                    }else if(type=="new"){
                        newSlide.setSentence(newSlide.index+ newImages[newSlide.index-1].desc, newImages[newSlide.index-1].author);
                        newSlide.setArtist(newImages[newSlide.index-1].author);
                        newSlide.setColor("hsl(90,60%,20%)");
                    }else if(type=="my"){
                        newSlide.setColor("hsl(250,60%,20%)");
                    }
                    swiper.appendSlide(newSlide.buildStructure());
                    delete newSlide;
                }
            }
        }

        followSwiper.on("onSlideChangeStart", function(swiper){if(userID!=="")addPainting(swiper, swiper.activeIndex, "follow")});
        popularSwiper.on("onSlideChangeStart", function(swiper){addPainting(swiper, swiper.activeIndex, "popular")});
        newSwiper.on("onSlideChangeStart", function(swiper){addPainting(swiper, swiper.activeIndex, "new")});
        mySwiper.on("onSlideChangeStart", function(swiper){if(userID!=="")addPainting(swiper, swiper.activeIndex, "my")});


        // home 컨텐츠 구조
        function Home(){
                this.container  =$("<div>").addClass("home_container swiper-slide");
                this.prev       =$("<div>").addClass("home_prev").html('<i class="material-icons">keyboard_arrow_down</i>');
                this.title      =$("<div>").addClass("home_title");
                this.contents   =$("<div>").addClass("home_contents");
                this.next       =$("<div>").addClass("home_next").html('<i class="material-icons">keyboard_arrow_up</i>');
        }

        Home.prototype = {
                setTitle:       function(title){
                                    this.title.html(title);
                                },
                setExplain:     function(explain){
                                    this.contents.html(explain);
                                },
                addContents:    function(contents){
                                    this.contents.append(contents);
                                },
                hidePrev:       function(){
                                    this.prev.hide();
                                },
                hideNext:       function(){
                                    this.next.hide();
                                },
                buildStructure: function(){
                                    this.container.append(this.prev);
                                    this.container.append($("<div>").addClass("home_title_margin"));
                                    this.container.append(this.title);
                                    this.container.append($("<div>").addClass("home_contents_margin"));
                                    this.container.append(this.contents);
                                    this.container.append(this.next);
                                    return this.container;
                                }
     }

        // 각각의 home 화면 설정
        function initFollow(userID){
            if(userID==""){
                var welcome = new Home();
                //david 1218
                welcome.setTitle(welcomeTextMain);
                welcome.setExplain(welcomeText);
                welcome.hidePrev();
                followSwiper.appendSlide(welcome.buildStructure());
                delete welcome;
            }else{
                followSwiper.removeAllSlides();
                var followHome = new Home();
                var addContent1 =
                    $("<div>").addClass("home_box_follow").html("follows ").append($("<span>").addClass("home_box_num").html(" 12"))
                var addContent2 =
                    $("<div>").addClass("home_box_follow").html("follower ").append($("<span>").addClass("home_box_num").html(" 21"))
                followHome.setTitle("Follow");
                followHome.setExplain("가까운 사람들의 그림입니다.");
                followHome.addContents(addContent1);
                followHome.addContents(addContent2);
                followHome.hidePrev();
                followSwiper.appendSlide(followHome.buildStructure());
                delete followHome;
                delete addContent1;
                delete addContent2;

                addPainting(followSwiper, 0, "follow");
            }
        }

        function initPopular(){
            var popularHome = new Home();
            popularHome.setTitle("Popular");
            popularHome.setExplain("가장 인기있는 그림입니다.");
            popularSwiper.appendSlide(popularHome.buildStructure());
            delete popularHome;

            addPainting(popularSwiper, 0, "popular");
        }

        function initNew(){
            var newHome = new Home();
            newHome.setTitle("new");
            newHome.setExplain("새로 올라온 그림입니다.");
            newSwiper.appendSlide(newHome.buildStructure());
            delete newHome;

            addPainting(newSwiper, 0, "new");
        }

        function initMy(userID){
            if(userID==""){
                var myHome = new Home();
                var logInBtn = $("<div>").addClass("login_btn").html("Log in").click(function(){logIn()});
                myHome.setTitle("my");
                myHome.setExplain("로그인해서 나와 팔로워의 그림을 확인하세요<br><br><br>");
                myHome.hideNext();
                myHome.addContents(logInBtn);
                mySwiper.appendSlide(myHome.buildStructure());
                delete myHome;
                delete logInBtn;
            }else{
                mySwiper.removeAllSlides();
                var myHome = new Home();
                myHome.setTitle("my");
                myHome.setExplain("내가 올리거나 포스트한 그림입니다.");
                var addContent1 =
                    $("<div>").addClass("home_box_my").html("uploaded ").append($("<span>").addClass("home_box_num").html(" 5"))
                var addContent2 =
                    $("<div>").addClass("home_box_my").html("posted ").append($("<span>").addClass("home_box_num").html(" 14"))
                myHome.hideNext();
                myHome.addContents(addContent1);
                myHome.addContents(addContent2);
                mySwiper.appendSlide(myHome.buildStructure());
                delete myHome;
                delete addContent1;
                delete addContent2;

                addPainting(mySwiper, 0, "my");
            }
        }
        function initMenu(userID){
            var sideLogin = $("#side_menu").find(".side_menu_login");
            if(userID==""){
                sideLogin.append($("<div>").addClass("login_btn").html("Log in").css("border-color", "rgb(100,100,100)").click(function(){logIn()}));
            }else{
                sideLogin.empty()
                sideLogin.append($("<div>").addClass("side_menu_login_id").html(userID));
                sideLogin.append($("<div>").html("edit | logout"));
            }
        }

        // 로그인과 함께 다시 init
        function logIn(){
            console.log("log in!!!")
            userID = "asummer";
            initFollow(userID);
            initMy(userID);
            initMenu(userID);

            mainSwiper.slideTo(0);
            mainSwiper.unlockSwipes();
            mainSwiper.lockSwipeToPrev();
        }

        // 최초 5개 미리 생성
        initFollow(userID);
        initPopular();
        initNew();
        initMy(userID);
        initMenu(userID);

        // side menu 이동
        sideMenu = $("#side_menu");
        function sideOn(){
            sideMenu.css("right", mainWidth-sideMenu.width());
            sideMenu.find(".side_menu_btn").hide();
            sideMenu.find(".side_menu_close").show();
            /*
            if(currentSwiper!==""){
                currentSwiper.slideTo(0);
            }
            */
            mainSwiper.lockSwipes();
            $(".modal").show().click(function(e){
                e.stopPropagation();
                sideOff();
            });
        }
        function sideOff(){
            sideMenu.css("right", "100%");
            sideMenu.find(".side_menu_close").hide();
            sideMenu.find(".side_menu_btn").show();
            mainSwiper.unlockSwipes();
            /*
            if(currentSwiper!==""){
                currentSwiper.slideTo(currentSwiper.previousIndex);
            }
            */
            $(".modal").hide();
        }
        sideMenu.find(".side_menu_btn").click(function(){
            sideOn();
        });
        sideMenu.find(".side_menu_close").click(function(){
            sideOff();
        });

        //side menu에 이벤트 설정
        function selectMenu(index){
            if(currentSwiper!==""){
                currentSwiper.slideTo(0);
            }
            sideOff();
            mainSwiper.slideTo(index);
        }

        $("#menu_follow").click(function(){
            selectMenu(0);
        });
        $("#menu_popular").click(function(){
            selectMenu(1);
        });
        $("#menu_new").click(function(){
            selectMenu(2);
        });
        $("#menu_my").click(function(){
            selectMenu(3);
        });

        // 초기 설정들
        // 가로휠방지 && 페이지네이션숨김 && 위로스와이프방지
        followSwiper.disableMousewheelControl();
        popularSwiper.disableMousewheelControl();
        newSwiper.disableMousewheelControl();
        mySwiper.disableMousewheelControl();
        mainSwiper.lockSwipeToPrev();
        $(".swiper-scrollbar").hide();

        // 화면 리사이즈할때 그림 폭 재 설정
        $(window).resize(function() {
            mainWidth = $(window).width();
            mainHeight = $(window).height();
            if(mainWidth>729){
                $(".list_painting").css({"width": "648px", "height": "900px"});
            }else{
                $(".list_painting").css({"width": mainWidth*0.8, "height": mainWidth*10/9});
            }
        });

        // 모바일 풀스크린
        function toggleFullScreen() {
            var doc = window.document;
            var docEl = doc.documentElement;

            var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen;
            var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen;

            if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement) {
                requestFullScreen.call(docEl);
                $("#fullscreen_btn").find("i").html("fullscreen_exit");
            }else {
                cancelFullScreen.call(doc);
                $("#fullscreen_btn").find("i").html("fullscreen");
            }
        }

    </script>
</body>
</html>
